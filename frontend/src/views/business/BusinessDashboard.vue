<script setup lang="ts">
import DashboardLayout from '../../components/dashboard/DashboardLayout.vue'
import { icons } from '../../utils/menuIcons'

const menuItems = [
  { id: 'dashboard', label: '–ì–ª–∞–≤–Ω–∞—è', icon: icons.dashboard, route: '/business' },
  { id: 'reports', label: '–û—Ç—á—ë—Ç—ã', icon: icons.report, route: '/business/reports' },
  { id: 'declarations', label: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏', icon: icons.document, route: '/business/declarations' },
  { id: 'calculator', label: '–†–∞—Å—á—ë—Ç —É—Ç–∏–ª—å—Å–±–æ—Ä–∞', icon: icons.calculator, route: '/business/calculator' },
  { id: 'payments', label: '–ü–ª–∞—Ç–µ–∂–∏', icon: icons.payment, route: '/business/payments' },
  { id: 'documents', label: '–î–æ–∫—É–º–µ–Ω—Ç—ã', icon: icons.folder, route: '/business/documents' },
  { id: 'normatives', label: '–ù–æ—Ä–º–∞—Ç–∏–≤—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏', icon: icons.registries, route: '/business/normatives' },
  { id: 'recyclers', label: '–ü–µ—Ä–µ—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç—Ö–æ–¥–æ–≤', icon: icons.recycle, route: '/business/recyclers' },
  { id: 'profile', label: '–ü—Ä–æ—Ñ–∏–ª—å –∫–æ–º–ø–∞–Ω–∏–∏', icon: icons.building, route: '/business/profile' },
]

const actionCards = [
  {
    icon: 'üìù',
    title: '–ü–æ–¥–∞—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—é',
    description: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–∞—Ö –∏ —É–ø–∞–∫–æ–≤–∫–µ',
    route: '/business/declarations/new',
    color: 'blue'
  },
  {
    icon: 'üìä',
    title: '–ü–æ–¥–∞—Ç—å –æ—Ç—á—ë—Ç –æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ',
    description: '–û—Ç—á—ë—Ç –æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ –æ—Ç—Ö–æ–¥–æ–≤ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤',
    route: '/business/reports/new',
    color: 'green'
  },
  {
    icon: 'üí∞',
    title: '–†–∞—Å—á—ë—Ç —É—Ç–∏–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞',
    description: '–†–∞—Å—á—ë—Ç —Å—É–º–º—ã —É—Ç–∏–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –∑–∞ —Ç–æ–≤–∞—Ä—ã –∏ —É–ø–∞–∫–æ–≤–∫—É',
    route: '/business/calculator',
    color: 'orange'
  }
]

const recentDocuments = [
  { name: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è Q4 2024', status: '–ü—Ä–∏–Ω—è—Ç–∞', date: '20.01.2025', type: 'declaration' },
  { name: '–û—Ç—á—ë—Ç –æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ 2024', status: '–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ', date: '18.01.2025', type: 'report' },
  { name: '–†–∞—Å—á—ë—Ç —É—Ç–∏–ª—å—Å–±–æ—Ä–∞ Q4', status: '–û–ø–ª–∞—á–µ–Ω', date: '15.01.2025', type: 'calculation' },
]

const getStatusClass = (status: string) => {
  switch (status) {
    case '–ü—Ä–∏–Ω—è—Ç–∞': return 'bg-green-100 text-green-800'
    case '–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ': return 'bg-yellow-100 text-yellow-800'
    case '–û–ø–ª–∞—á–µ–Ω': return 'bg-blue-100 text-blue-800'
    case '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞': return 'bg-red-100 text-red-800'
    default: return 'bg-gray-100 text-gray-800'
  }
}
</script>

<template>
  <DashboardLayout
    role="business"
    roleTitle="–ë–∏–∑–Ω–µ—Å"
    userName="–û—Å–û–û ¬´–¢–µ—Ö–ü—Ä–æ–º¬ª"
    :menuItems="menuItems"
  >
    <div class="content__header mb-8">
      <h1 class="text-2xl lg:text-3xl font-bold text-[#1e293b] mb-2">–ì–ª–∞–≤–Ω–∞—è</h1>
      <p class="text-[#64748b]">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞–º–∏, –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è–º–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏</p>
    </div>

    <!-- Action Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <router-link
        v-for="card in actionCards"
        :key="card.title"
        :to="card.route"
        class="action-card group bg-white rounded-2xl p-6 shadow-sm border-2 border-transparent hover:border-[#2563eb] hover:shadow-lg transition-all duration-300 hover:-translate-y-1 relative overflow-hidden"
      >
        <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#2563eb] to-[#3b82f6] opacity-0 group-hover:opacity-100 transition-opacity"></div>
        <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-[#3b82f6] to-[#2563eb] flex items-center justify-center text-2xl mb-4">
          {{ card.icon }}
        </div>
        <h3 class="text-lg font-semibold text-[#1e293b] mb-2">{{ card.title }}</h3>
        <p class="text-sm text-[#64748b] leading-relaxed">{{ card.description }}</p>
      </router-link>
    </div>

    <!-- Stats Row -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="bg-white rounded-xl p-5 shadow-sm border border-[#e2e8f0]">
        <p class="text-sm text-[#64748b] mb-1">–î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –∑–∞ –≥–æ–¥</p>
        <p class="text-2xl font-bold text-[#1e293b]">4</p>
      </div>
      <div class="bg-white rounded-xl p-5 shadow-sm border border-[#e2e8f0]">
        <p class="text-sm text-[#64748b] mb-1">–û—Ç—á—ë—Ç—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</p>
        <p class="text-2xl font-bold text-[#f59e0b]">1</p>
      </div>
      <div class="bg-white rounded-xl p-5 shadow-sm border border-[#e2e8f0]">
        <p class="text-sm text-[#64748b] mb-1">–ö –æ–ø–ª–∞—Ç–µ</p>
        <p class="text-2xl font-bold text-[#ef4444]">45 200 —Å–æ–º</p>
      </div>
      <div class="bg-white rounded-xl p-5 shadow-sm border border-[#e2e8f0]">
        <p class="text-sm text-[#64748b] mb-1">–û–ø–ª–∞—á–µ–Ω–æ –∑–∞ –≥–æ–¥</p>
        <p class="text-2xl font-bold text-[#10b981]">125 800 —Å–æ–º</p>
      </div>
    </div>

    <!-- Recent Documents -->
    <div class="bg-white rounded-2xl shadow-sm border border-[#e2e8f0] overflow-hidden">
      <div class="px-6 py-4 border-b border-[#e2e8f0] flex items-center justify-between">
        <h2 class="text-lg font-semibold text-[#1e293b]">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h2>
        <router-link to="/business/documents" class="text-[#2563eb] text-sm font-medium hover:underline">
          –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí
        </router-link>
      </div>
      <div class="divide-y divide-[#f1f5f9]">
        <div
          v-for="doc in recentDocuments"
          :key="doc.name"
          class="px-6 py-4 flex items-center justify-between hover:bg-[#f8fafc] transition-colors"
        >
          <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-lg bg-[#f1f5f9] flex items-center justify-center">
              <span v-if="doc.type === 'declaration'">üìã</span>
              <span v-else-if="doc.type === 'report'">üìä</span>
              <span v-else>üí∞</span>
            </div>
            <div>
              <p class="font-medium text-[#1e293b]">{{ doc.name }}</p>
              <p class="text-sm text-[#64748b]">{{ doc.date }}</p>
            </div>
          </div>
          <span :class="['px-3 py-1 rounded-full text-xs font-medium', getStatusClass(doc.status)]">
            {{ doc.status }}
          </span>
        </div>
      </div>
    </div>

    <!-- Info Banner -->
    <div class="mt-8 bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] rounded-2xl p-6 text-white">
      <div class="flex items-start gap-4">
        <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0 text-2xl">
          ‚ÑπÔ∏è
        </div>
        <div>
          <h4 class="font-semibold text-lg mb-1">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</h4>
          <p class="opacity-90">–°—Ä–æ–∫ –ø–æ–¥–∞—á–∏ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –∑–∞ I –∫–≤–∞—Ä—Ç–∞–ª 2025 –≥–æ–¥–∞ ‚Äî –¥–æ 20 –∞–ø—Ä–µ–ª—è 2025 –≥. –ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥–∞—Ç—å –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å.</p>
        </div>
      </div>
    </div>
  </DashboardLayout>
</template>
