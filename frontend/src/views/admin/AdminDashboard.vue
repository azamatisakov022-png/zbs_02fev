<script setup lang="ts">
import DashboardLayout from '../../components/dashboard/DashboardLayout.vue'
import StatsCard from '../../components/dashboard/StatsCard.vue'
import { icons, statsIcons } from '../../utils/menuIcons'

const menuItems = [
  { id: 'dashboard', label: '–ì–ª–∞–≤–Ω–∞—è', icon: icons.dashboard, route: '/admin' },
  { id: 'users', label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', icon: icons.users, route: '/admin/users' },
  { id: 'organizations', label: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', icon: icons.building, route: '/admin/organizations' },
  { id: 'declarations', label: '–í—Å–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏', icon: icons.document, route: '/admin/declarations' },
  { id: 'reports', label: '–í—Å–µ –æ—Ç—á—ë—Ç—ã', icon: icons.report, route: '/admin/reports' },
  { id: 'registries', label: '–†–µ–µ—Å—Ç—Ä—ã –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏', icon: icons.registries, route: '/admin/registries' },
  { id: 'calculations', label: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—á—ë—Ç–æ–≤', icon: icons.calculator, route: '/admin/calculations' },
  { id: 'analytics', label: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞', icon: icons.analytics, route: '/admin/analytics' },
  { id: 'audit', label: '–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π', icon: icons.audit, route: '/admin/audit' },
  { id: 'settings', label: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã', icon: icons.settings, route: '/admin/settings' },
]

const stats = [
  { title: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π', value: '342', icon: statsIcons.users, color: 'blue' as const },
  { title: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏–π –∑–∞ –º–µ—Å—è—Ü', value: '1,247', icon: statsIcons.documents, color: 'teal' as const },
  { title: '–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ', value: '89', icon: statsIcons.applications, color: 'orange' as const },
  { title: '–°–æ–±—Ä–∞–Ω–æ —É—Ç–∏–ª—å—Å–±–æ—Ä–∞', value: '12.4 –º–ª–Ω', icon: statsIcons.money, color: 'green' as const },
]

const recentActivity = [
  { action: '–ù–æ–≤–∞—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è', company: '–û—Å–û–û ¬´–¢–µ—Ö–ü—Ä–æ–º¬ª', time: '5 –º–∏–Ω –Ω–∞–∑–∞–¥', type: 'declaration' },
  { action: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', company: '–ò–ü –ê—Å–∞–Ω–æ–≤', time: '12 –º–∏–Ω –Ω–∞–∑–∞–¥', type: 'registration' },
  { action: '–û—Ç—á—ë—Ç –ø—Ä–∏–Ω—è—Ç', company: '–û–ê–û ¬´–°—Ç—Ä–æ–π–ú–∞—Ä–∫–µ—Ç¬ª', time: '25 –º–∏–Ω –Ω–∞–∑–∞–¥', type: 'report' },
  { action: '–û–ø–ª–∞—Ç–∞ —É—Ç–∏–ª—å—Å–±–æ—Ä–∞', company: '–û—Å–û–û ¬´–ü–∏—â–µ–ü—Ä–æ–º¬ª', time: '1 —á–∞—Å –Ω–∞–∑–∞–¥', type: 'payment' },
  { action: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞', company: '–û—Å–û–û ¬´–ú–µ–≥–∞–¢–æ—Ä–≥¬ª', time: '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥', type: 'rejected' },
]

const getActivityIcon = (type: string) => {
  switch (type) {
    case 'declaration': return 'üìã'
    case 'registration': return 'üè¢'
    case 'report': return 'üìä'
    case 'payment': return 'üí∞'
    case 'rejected': return '‚ùå'
    default: return 'üìå'
  }
}

const pendingItems = [
  { type: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ', count: 45, route: '/admin/declarations' },
  { type: '–û—Ç—á—ë—Ç—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ', count: 23, route: '/admin/reports' },
  { type: '–ù–æ–≤—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', count: 12, route: '/admin/organizations' },
  { type: '–û–±—Ä–∞—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', count: 9, route: '/admin/support' },
]
</script>

<template>
  <DashboardLayout
    role="admin"
    roleTitle="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
    userName="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
    :menuItems="menuItems"
  >
    <div class="content__header mb-8">
      <h1 class="text-2xl lg:text-3xl font-bold text-[#1e293b] mb-2">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
      <p class="text-[#64748b]">–ì–ü ¬´–≠–∫–æ –û–ø–µ—Ä–∞—Ç–æ—Ä¬ª ‚Äî –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã</p>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <StatsCard
        v-for="stat in stats"
        :key="stat.title"
        :title="stat.title"
        :value="stat.value"
        :icon="stat.icon"
        :color="stat.color"
      />
    </div>

    <!-- Quick Actions & Pending -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
      <!-- Quick Actions -->
      <div class="bg-white rounded-2xl p-6 shadow-sm border border-[#e2e8f0]">
        <h3 class="text-lg font-semibold text-[#1e293b] mb-4">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
        <div class="space-y-3">
          <router-link to="/admin/users" class="flex items-center gap-3 p-4 rounded-xl bg-[#f8fafc] hover:bg-blue-50 transition-colors">
            <div class="w-10 h-10 rounded-lg bg-[#2563eb] flex items-center justify-center text-white" v-html="icons.users"></div>
            <span class="font-medium text-[#1e293b]">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</span>
          </router-link>
          <router-link to="/admin/declarations" class="flex items-center gap-3 p-4 rounded-xl bg-[#f8fafc] hover:bg-blue-50 transition-colors">
            <div class="w-10 h-10 rounded-lg bg-[#10b981] flex items-center justify-center text-white" v-html="icons.document"></div>
            <span class="font-medium text-[#1e293b]">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π</span>
          </router-link>
          <router-link to="/admin/analytics" class="flex items-center gap-3 p-4 rounded-xl bg-[#f8fafc] hover:bg-blue-50 transition-colors">
            <div class="w-10 h-10 rounded-lg bg-[#f59e0b] flex items-center justify-center text-white" v-html="icons.analytics"></div>
            <span class="font-medium text-[#1e293b]">–í—ã–≥—Ä—É–∑–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É</span>
          </router-link>
        </div>
      </div>

      <!-- Pending Items -->
      <div class="bg-white rounded-2xl p-6 shadow-sm border border-[#e2e8f0]">
        <h3 class="text-lg font-semibold text-[#1e293b] mb-4">–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</h3>
        <div class="space-y-3">
          <router-link
            v-for="item in pendingItems"
            :key="item.type"
            :to="item.route"
            class="flex items-center justify-between p-4 rounded-xl bg-[#f8fafc] hover:bg-orange-50 transition-colors"
          >
            <span class="font-medium text-[#1e293b]">{{ item.type }}</span>
            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium">
              {{ item.count }}
            </span>
          </router-link>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="bg-white rounded-2xl shadow-sm border border-[#e2e8f0] overflow-hidden mb-8">
      <div class="px-6 py-4 border-b border-[#e2e8f0] flex items-center justify-between">
        <h2 class="text-lg font-semibold text-[#1e293b]">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
        <router-link to="/admin/audit" class="text-[#2563eb] text-sm font-medium hover:underline">
          –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π ‚Üí
        </router-link>
      </div>
      <div class="divide-y divide-[#f1f5f9]">
        <div
          v-for="activity in recentActivity"
          :key="activity.company + activity.time"
          class="px-6 py-4 flex items-center justify-between hover:bg-[#f8fafc] transition-colors"
        >
          <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-lg bg-[#f1f5f9] flex items-center justify-center">
              <span>{{ getActivityIcon(activity.type) }}</span>
            </div>
            <div>
              <p class="font-medium text-[#1e293b]">{{ activity.action }}</p>
              <p class="text-sm text-[#64748b]">{{ activity.company }}</p>
            </div>
          </div>
          <span class="text-sm text-[#64748b]">{{ activity.time }}</span>
        </div>
      </div>
    </div>

    <!-- System Status Banner -->
    <div class="bg-gradient-to-r from-[#10b981] to-[#059669] rounded-2xl p-6 text-white">
      <div class="flex items-start gap-4">
        <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div>
          <h4 class="font-semibold text-lg mb-1">–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ</h4>
          <p class="opacity-90">–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ. –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: —Å–µ–≥–æ–¥–Ω—è –≤ 03:00.</p>
        </div>
      </div>
    </div>
  </DashboardLayout>
</template>
