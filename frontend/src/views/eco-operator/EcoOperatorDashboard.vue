<script setup lang="ts">
import DashboardLayout from '../../components/dashboard/DashboardLayout.vue'
import StatsCard from '../../components/dashboard/StatsCard.vue'
import { icons, statsIcons } from '../../utils/menuIcons'

const menuItems = [
  { id: 'dashboard', label: '–ì–ª–∞–≤–Ω–∞—è', icon: icons.dashboard, route: '/eco-operator' },
  { id: 'incoming-declarations', label: '–í—Ö–æ–¥—è—â–∏–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏', icon: icons.document, route: '/eco-operator/incoming-declarations' },
  { id: 'incoming-reports', label: '–í—Ö–æ–¥—è—â–∏–µ –æ—Ç—á—ë—Ç—ã', icon: icons.report, route: '/eco-operator/incoming-reports' },
  { id: 'enterprise', label: '–ú–æ—ë –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ', icon: icons.building, route: '/eco-operator/enterprise' },
  { id: 'licenses', label: '–õ–∏—Ü–µ–Ω–∑–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã', icon: icons.license, route: '/eco-operator/licenses' },
  { id: 'waste-types', label: '–í–∏–¥—ã –æ—Ç—Ö–æ–¥–æ–≤', icon: icons.recycle, route: '/eco-operator/waste-types' },
  { id: 'my-reports', label: '–ú–æ–∏ –æ—Ç—á—ë—Ç—ã', icon: icons.registries, route: '/eco-operator/my-reports' },
  { id: 'payments', label: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π', icon: icons.money, route: '/eco-operator/payments' },
  { id: 'analytics', label: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞', icon: icons.analytics, route: '/eco-operator/analytics' },
  { id: 'profile', label: '–ü—Ä–æ—Ñ–∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–π', icon: icons.profile, route: '/eco-operator/profile' },
]

const stats = [
  { title: '–°—Ç–∞—Ç—É—Å –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è', value: '–ê–∫—Ç–∏–≤–µ–Ω', icon: statsIcons.status, color: 'green' as const },
  { title: '–ù–æ–≤—ã—Ö –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π', value: '12', icon: statsIcons.documents, color: 'blue' as const },
  { title: '–ü—Ä–∏–Ω—è—Ç–æ –∑–∞ –º–µ—Å—è—Ü', value: '387 —Ç', icon: statsIcons.waste, color: 'teal' as const },
  { title: '–°—Ä–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–∏', value: '15.08.2026', icon: statsIcons.calendar, color: 'orange' as const },
]

const recentDeclarations = [
  { company: '–û—Å–û–û ¬´–¢–µ—Ö–ü—Ä–æ–º¬ª', type: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö', date: '20.01.2025', status: '–ù–æ–≤–∞—è' },
  { company: '–û–ê–û ¬´–°—Ç—Ä–æ–π–ú–∞—Ä–∫–µ—Ç¬ª', type: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è –æ–± —É–ø–∞–∫–æ–≤–∫–µ', date: '19.01.2025', status: '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏' },
  { company: '–û—Å–û–û ¬´–ü–∏—â–µ–ü—Ä–æ–º¬ª', type: '–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö', date: '18.01.2025', status: '–ü—Ä–∏–Ω—è—Ç–∞' },
]

const getStatusClass = (status: string) => {
  switch (status) {
    case '–ù–æ–≤–∞—è': return 'bg-blue-100 text-blue-800'
    case '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏': return 'bg-yellow-100 text-yellow-800'
    case '–ü—Ä–∏–Ω—è—Ç–∞': return 'bg-green-100 text-green-800'
    case '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞': return 'bg-red-100 text-red-800'
    default: return 'bg-gray-100 text-gray-800'
  }
}
</script>

<template>
  <DashboardLayout
    role="eco-operator"
    roleTitle="–≠–∫–æ –û–ø–µ—Ä–∞—Ç–æ—Ä"
    userName="–û—Å–û–û ¬´–≠–∫–æ–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞¬ª"
    :menuItems="menuItems"
  >
    <div class="content__header mb-8">
      <h1 class="text-2xl lg:text-3xl font-bold text-[#1e293b] mb-2">–ì–ª–∞–≤–Ω–∞—è</h1>
      <p class="text-[#64748b]">–ü—Ä–∏—ë–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π –æ—Ç –±–∏–∑–Ω–µ—Å–∞</p>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <StatsCard
        v-for="stat in stats"
        :key="stat.title"
        :title="stat.title"
        :value="stat.value"
        :icon="stat.icon"
        :color="stat.color"
      />
    </div>

    <!-- Quick Actions & Recent Declarations -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
      <div class="bg-white rounded-2xl p-6 shadow-sm border border-[#e2e8f0]">
        <h3 class="text-lg font-semibold text-[#1e293b] mb-4">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
        <div class="space-y-3">
          <router-link to="/eco-operator/incoming-declarations" class="flex items-center gap-3 p-4 rounded-xl bg-[#f8fafc] hover:bg-[#e8f5f5] transition-colors">
            <div class="w-10 h-10 rounded-lg bg-[#2563eb] flex items-center justify-center text-white" v-html="icons.document"></div>
            <div>
              <span class="font-medium text-[#1e293b] block">–í—Ö–æ–¥—è—â–∏–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏</span>
              <span class="text-sm text-[#64748b]">12 –Ω–æ–≤—ã—Ö</span>
            </div>
          </router-link>
          <router-link to="/eco-operator/incoming-reports" class="flex items-center gap-3 p-4 rounded-xl bg-[#f8fafc] hover:bg-[#e8f5f5] transition-colors">
            <div class="w-10 h-10 rounded-lg bg-[#10b981] flex items-center justify-center text-white" v-html="icons.report"></div>
            <div>
              <span class="font-medium text-[#1e293b] block">–í—Ö–æ–¥—è—â–∏–µ –æ—Ç—á—ë—Ç—ã</span>
              <span class="text-sm text-[#64748b]">5 –Ω–æ–≤—ã—Ö</span>
            </div>
          </router-link>
          <router-link to="/eco-operator/my-reports" class="flex items-center gap-3 p-4 rounded-xl bg-[#f8fafc] hover:bg-[#e8f5f5] transition-colors">
            <div class="w-10 h-10 rounded-lg bg-[#f59e0b] flex items-center justify-center text-white" v-html="icons.registries"></div>
            <div>
              <span class="font-medium text-[#1e293b] block">–ü–æ–¥–∞—Ç—å –æ—Ç—á—ë—Ç –æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ</span>
              <span class="text-sm text-[#64748b]">–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –∑–∞ –ø–µ—Ä–∏–æ–¥</span>
            </div>
          </router-link>
        </div>
      </div>

      <div class="bg-white rounded-2xl p-6 shadow-sm border border-[#e2e8f0]">
        <h3 class="text-lg font-semibold text-[#1e293b] mb-4">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏</h3>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <span class="text-[#64748b]">–ü–ª–∞—Å—Ç–∏–∫</span>
            <div class="flex items-center gap-3">
              <div class="w-32 h-2 bg-[#f1f5f9] rounded-full overflow-hidden">
                <div class="h-full bg-[#2563eb] rounded-full" style="width: 75%"></div>
              </div>
              <span class="font-medium text-[#1e293b]">189 —Ç</span>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-[#64748b]">–ë—É–º–∞–≥–∞/–∫–∞—Ä—Ç–æ–Ω</span>
            <div class="flex items-center gap-3">
              <div class="w-32 h-2 bg-[#f1f5f9] rounded-full overflow-hidden">
                <div class="h-full bg-[#10b981] rounded-full" style="width: 60%"></div>
              </div>
              <span class="font-medium text-[#1e293b]">124 —Ç</span>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-[#64748b]">–°—Ç–µ–∫–ª–æ</span>
            <div class="flex items-center gap-3">
              <div class="w-32 h-2 bg-[#f1f5f9] rounded-full overflow-hidden">
                <div class="h-full bg-[#f59e0b] rounded-full" style="width: 35%"></div>
              </div>
              <span class="font-medium text-[#1e293b]">52 —Ç</span>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-[#64748b]">–ú–µ—Ç–∞–ª–ª</span>
            <div class="flex items-center gap-3">
              <div class="w-32 h-2 bg-[#f1f5f9] rounded-full overflow-hidden">
                <div class="h-full bg-[#6366f1] rounded-full" style="width: 20%"></div>
              </div>
              <span class="font-medium text-[#1e293b]">22 —Ç</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Declarations Table -->
    <div class="bg-white rounded-2xl shadow-sm border border-[#e2e8f0] overflow-hidden mb-8">
      <div class="px-6 py-4 border-b border-[#e2e8f0] flex items-center justify-between">
        <h2 class="text-lg font-semibold text-[#1e293b]">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏</h2>
        <router-link to="/eco-operator/incoming-declarations" class="text-[#2563eb] text-sm font-medium hover:underline">
          –í—Å–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ ‚Üí
        </router-link>
      </div>
      <div class="divide-y divide-[#f1f5f9]">
        <div
          v-for="decl in recentDeclarations"
          :key="decl.company + decl.date"
          class="px-6 py-4 flex items-center justify-between hover:bg-[#f8fafc] transition-colors"
        >
          <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-lg bg-[#f1f5f9] flex items-center justify-center">
              <span>üìã</span>
            </div>
            <div>
              <p class="font-medium text-[#1e293b]">{{ decl.company }}</p>
              <p class="text-sm text-[#64748b]">{{ decl.type }} ‚Ä¢ {{ decl.date }}</p>
            </div>
          </div>
          <span :class="['px-3 py-1 rounded-full text-xs font-medium', getStatusClass(decl.status)]">
            {{ decl.status }}
          </span>
        </div>
      </div>
    </div>

    <!-- License Info Banner -->
    <div class="bg-gradient-to-r from-[#2563eb] to-[#1d4ed8] rounded-2xl p-6 text-white">
      <div class="flex items-start gap-4">
        <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div>
          <h4 class="font-semibold text-lg mb-1">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏</h4>
          <p class="opacity-90">–í–∞—à–∞ –ª–∏—Ü–µ–Ω–∑–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –¥–æ 15 –∞–≤–≥—É—Å—Ç–∞ 2026 –≥–æ–¥–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–ª–µ–Ω–∏—è –Ω–µ –ø–æ–∑–¥–Ω–µ–µ —á–µ–º –∑–∞ 3 –º–µ—Å—è—Ü–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞.</p>
        </div>
      </div>
    </div>
  </DashboardLayout>
</template>
