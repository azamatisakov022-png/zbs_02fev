/**
 * Примечания к кодам ТН ВЭД из Постановления КМ КР №322 от 19 июня 2024 г., Приложение 1
 * Цифры в угловых скобках <N> — сноски на эти примечания.
 */
export const tnvedNotes: Record<string, string> = {
  '1': 'Наименования товаров, подлежащих переработке, приводятся по государственному статистическому классификатору продукции (товаров и услуг) (ГК 017-2015, Версия 3).',
  '2': 'В случаях, когда указан код товарной позиции без примечаний, в настоящий перечень включаются все товары товарных субпозиций и подсубпозиций, входящих в указанную товарную позицию.',
  '3': 'Только товары, указанные в графе «Наименование товара».',
  '4': 'Все товары товарной позиции 3923, за исключением товаров субпозиции 3923 40.',
  '5': 'За исключением товарной позиции 3924 90 000 1.',
  '6': 'Все товары, за исключением составных частей товаров, включённых в Перечень товаров, подлежащих переработке после утраты ими потребительских свойств.',
}

export const tnvedNotesSource = 'Источник: Постановление Кабинета Министров КР №322 от 19 июня 2024 г., Приложение 1'

/**
 * Parse a TNVED code string and extract footnote numbers.
 * E.g. "Из 3923 <4>" → { cleanCode: "Из 3923", notes: ["4"] }
 */
export function parseTnvedCode(code: string): { cleanCode: string; notes: string[] } {
  const notes: string[] = []
  const cleanCode = code.replace(/<(\d+)>/g, (_match, num) => {
    notes.push(num)
    return ''
  }).trim()
  return { cleanCode, notes }
}
